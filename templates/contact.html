<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EasyGo Pharm - Contact</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        :root {
            --main-red: #8A0303;
        }

        body {
            font-family: Arial, sans-serif;
        }

        .navbar {
            background-color: var(--main-red);
        }

        .navbar-brand,
        .nav-link {
            color: white !important;
            font-weight: bold;
        }

        .section-title {
            text-align: center;
            font-weight: bold;
            margin: 40px 0;
            color: var(--main-red);
        }

        .contact-info i {
            font-size: 1.5rem;
            margin-right: 10px;
            color: var(--main-red);
        }

        .footer {
            background: var(--main-red);
            color: white;
            text-align: center;
            padding: 20px;
            margin-top: 40px;
        }
    </style>
</head>

<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg">
        <div class="container">
            <a class="navbar-brand" href="index.html">EasyGo</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMenu">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navMenu">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="about.html">About</a></li>
                    <li class="nav-item"><a class="nav-link" href="services.html">Services</a></li>
                    <li class="nav-item"><a class="nav-link active" href="contact.html">Contact</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Contact Section -->
    <section class="py-5">
        <div class="container">
            <h2 class="section-title">Contact Us</h2>
            <div class="row g-4">
                <!-- Contact Form -->
                <div class="col-md-6">
                    <form>
                        <div class="mb-3">
                            <input type="text" class="form-control" placeholder="Your Name" required>
                        </div>
                        <div class="mb-3">
                            <input type="email" class="form-control" placeholder="Your Email" required>
                        </div>
                        <div class="mb-3">
                            <textarea class="form-control" rows="4" placeholder="Your Message" required></textarea>
                        </div>
                        <button type="submit" class="btn btn-danger">Send Message</button>
                    </form>
                </div>
                <!-- Contact Info -->
                <div class="col-md-6">
                    <div class="contact-info">
                        <p><i class="bi bi-geo-alt-fill"></i> Jos, Plateau State, Nigeria</p>
                        <p><i class="bi bi-telephone-fill"></i> +234 800 123 4567</p>
                        <p><i class="bi bi-envelope-fill"></i> support@easygopharm.com</p>
                    </div>
                    <iframe src="https://www.google.com/maps/embed?pb=!1m18!..." width="100%" height="250"
                        style="border:0;" allowfullscreen="" loading="lazy"></iframe>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <p>&copy; 2025 EasyGo Pharm. All rights reserved.</p>
    </footer>
</body>

</html>

<!-- Contact Section -->
<section id="contact" class="py-5 text-center">
    <div class="container">
        <h2>Contact Us</h2>
        <form class="mt-4 col-md-6 mx-auto">
            <div class="mb-3">
                <input type="text" class="form-control" placeholder="Your Name" required>
            </div>
            <div class="mb-3">
                <input type="email" class="form-control" placeholder="Your Email" required>
            </div>
            <div class="mb-3">
                <textarea class="form-control" rows="4" placeholder="Your Message" required></textarea>
            </div>
            <button type="submit" class="btn btn-danger">Send Message</button>
        </form>
    </div>
</section>



Wroking Flask
from flask import Flask, request, jsonify, render_template
from flask_cors import CORS
import csv
import os
import smtplib
from email.mime.text import MIMEText
import pandas as pd

app = Flask(__name__)
CORS(app)

def load_inventory():
data = []
with open("data/inventory.csv", newline="", encoding="utf-8") as f:
reader = csv.DictReader(f, delimiter="\t") # üëà Important: tab-delimited
for row in reader:
data.append(row)
return data


@app.route("/")
def index():
return render_template("index.html")


# ‚úÖ Working Search Route (unchanged)
@app.route('/search')
def search():
query = request.args.get('q', '').lower()
results = []

csv_path = os.path.join('data', 'inventory.csv')
with open(csv_path, newline='', encoding='utf-8-sig') as csvfile:
reader = csv.DictReader(csvfile)
for item in reader:
clean_item = {k.strip(): v.strip() for k, v in item.items() if k}
drug_name = clean_item.get("Drug Name", "").lower()
if query in drug_name:
results.append(clean_item)

return jsonify(results)


# ‚úÖ Drug Request Route (updated with email sending)
@app.route("/request", methods=["POST"])
def request_drug():
data = request.json
name = data.get("name")
email = data.get("email")
drug_name = data.get("drugName")
dosage = data.get("dosage")
info = data.get("info")

print("Drug request received:", data)

# üì® Build the email content
subject = f"New Drug Request from {name}"
body = f"""
You have received a new drug request from EasyGo Pharm:

Name: {name}
Email: {email}
Drug: {drug_name}
Dosage: {dosage}
Additional Info: {info}
"""

msg = MIMEText(body)
msg["Subject"] = subject
msg["From"] = "easygo@easygopharm.com"
msg["To"] = "easygo@easygopharm.com"

try:
# üß† Note: Replace with your real SMTP details or use SendGrid for production
with smtplib.SMTP("smtp.hostinger.com", 587) as server:
server.starttls()
server.login("easygo@easygopharm.com", "Easygo@1")
server.send_message(msg)

print("‚úÖ Email sent successfully")
return jsonify({"success": True, "message": "Request sent successfully!"}), 200

except Exception as e:
print("‚ùå Error sending email:", e)
return jsonify({"success": False, "error": str(e)}), 500


# ‚úÖ Inventory Upload Route (new)
UPLOAD_FOLDER = 'uploads'
os.makedirs(UPLOAD_FOLDER, exist_ok=True)
INVENTORY_PATH = 'data/inventory.csv'

@app.route('/upload_inventory', methods=['GET', 'POST'])
def upload_inventory():
message = None
if request.method == 'POST':
pharmacy_name = request.form.get('pharmacy_name')
file = request.files.get('file')

if not file:
message = "Please upload a CSV file."
return render_template('upload_inventory.html', message=message)

filepath = os.path.join(UPLOAD_FOLDER, file.filename)
file.save(filepath)

try:
uploaded_df = pd.read_csv(filepath)

# Ensure columns are correct
required_columns = ['Drug Name', 'Pharmacy Name', 'Address', 'Contact', 'Price']
if not all(col in uploaded_df.columns for col in required_columns):
message = "CSV file format is incorrect. Please use the required column headers."
return render_template('upload_inventory.html', message=message)

# Optional: replace pharmacy name if not present in file
if 'Pharmacy Name' in uploaded_df.columns:
uploaded_df['Pharmacy Name'] = uploaded_df['Pharmacy Name'].fillna(pharmacy_name)
else:
uploaded_df['Pharmacy Name'] = pharmacy_name

# Append to main inventory
main_df = pd.read_csv(INVENTORY_PATH)
combined_df = pd.concat([main_df, uploaded_df], ignore_index=True)
combined_df.to_csv(INVENTORY_PATH, index=False)

message = "Inventory uploaded successfully!"

except Exception as e:
message = f"An error occurred: {e}"

finally:
os.remove(filepath)

return render_template('upload_inventory.html', message=message)


if __name__ == "__main__":
app.run(debug=True)